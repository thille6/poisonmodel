<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fotbollsstatistik & Oddskalkylator</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <!-- Tailwind CSS lokalt -->
    <link rel="stylesheet" href="output.css">
    <!-- Chart.js f칬r stapeldiagram -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4/dist/chart.umd.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-800">Fotbollsstatistik & Oddskalkylator</h1>
        
        <!-- Input-formul칛r -->
        <div class="bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Matchdata</h2>
            
            <!-- xG-v칛rden -->
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-2 text-gray-700">xG-v칛rden</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <label for="homeXGF" class="block text-sm font-medium text-gray-700 mb-1" title="F칬rv칛ntade m친l som hemmalaget skapar.">Hemmalag xG</label>
                        <input type="number" id="homeXGF" step="0.1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="1.5">
                    </div>
                    <div>
                        <label for="homeXGA" class="block text-sm font-medium text-gray-700 mb-1" title="F칬rv칛ntade m친l som hemmalaget sl칛pper in.">Hemmalag xGA</label>
                        <input type="number" id="homeXGA" step="0.1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="1.0">
                    </div>
                    <div>
                        <label for="awayXGF" class="block text-sm font-medium text-gray-700 mb-1" title="F칬rv칛ntade m친l som bortalaget skapar.">Bortalag xG</label>
                        <input type="number" id="awayXGF" step="0.1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="1.2">
                    </div>
                    <div>
                        <label for="awayXGA" class="block text-sm font-medium text-gray-700 mb-1" title="F칬rv칛ntade m친l som bortalaget sl칛pper in.">Bortalag xGA</label>
                        <input type="number" id="awayXGA" step="0.1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="1.3">
                    </div>
                </div>
            </div>
            
            <!-- Form och ligasnitt -->
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-2 text-gray-700">Form och ligasnitt</h3>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <div>
                        <label for="leagueAvg" class="block text-sm font-medium text-gray-700 mb-1" title="Genomsnittligt antal m친l per match i ligan.">Ligasnitt (m친l/match)</label>
                        <input type="number" id="leagueAvg" step="0.1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="2.7">
                    </div>
                    <div>
                        <label for="homeForm" class="block text-sm font-medium text-gray-700 mb-1" title="Hemmalagets form baserat p친 m친l i senaste 5 matcher.">Form Hemma (m친l senaste 5)</label>
                        <input type="number" id="homeForm" step="1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="6">
                    </div>
                    <div>
                        <label for="awayForm" class="block text-sm font-medium text-gray-700 mb-1" title="Bortalagets form baserat p친 m친l i senaste 5 matcher.">Form Borta (m친l senaste 5)</label>
                        <input type="number" id="awayForm" step="1" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="5.5">
                    </div>
                </div>
            </div>
            
            <!-- Korrelation och odds -->
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-2 text-gray-700">Korrelation och odds</h3>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                    <div>
                        <label for="correlation" class="block text-sm font-medium text-gray-700 mb-1" title="Korrelation mellan hemma- och bortam친l. H칬gre v칛rde ger starkare samband mellan m친len. 0.4 칛r ett bra standardv칛rde f칬r fotboll.">
                            Korrelation (0-1)
                        </label>
                        <input type="number" id="correlation" step="0.01" min="0" max="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="0.4">
                        <p class="text-xs text-gray-500 mt-1">H칬gre v칛rde = starkare korrelation mellan hemma- och bortam친l</p>
                    </div>
                    <div>
                        <label for="userOdds" class="block text-sm font-medium text-gray-700 mb-1" title="Ange det odds du kan f친 hos ditt spelbolag f칬r att ber칛kna v칛rdeindikator.">
                            Ditt spelodds
                        </label>
                        <input type="number" id="userOdds" step="0.1" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="2.00" placeholder="Valfritt">
                    </div>
                    <div>
                        <label for="betType" class="block text-sm font-medium text-gray-700 mb-1" title="V칛lj typ av spel f칬r v칛rdebed칬mning.">Speltyp</label>
                        <select id="betType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="home">Hemmavinst (1)</option>
                            <option value="draw">Oavgjort (X)</option>
                            <option value="away">Bortavinst (2)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- L칛gg till detta f칛lt ovanf칬r knapparna -->
            <div class="mb-4">
                <label for="calculationTitle" class="block text-sm font-medium text-gray-700 mb-1">Rubrik f칬r ber칛kningen</label>
                <input type="text" id="calculationTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ange en beskrivande rubrik f칬r ber칛kningen">
            </div>
            
            <!-- Beh친ll endast denna saveBtn i huvudformul칛ret -->
            <div class="flex justify-center mt-6 space-x-4">
                <!-- Exempel p친 f칬rb칛ttrad tillg칛nglighet f칬r en knapp -->
                <button 
                    id="calculateBtn" 
                    class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition"
                    aria-label="Ber칛kna resultat"
                >
                    Ber칛kna
                </button>
                <button id="saveBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 transition">Spara ber칛kning</button>
                <button id="showSavedBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 transition">Visa sparade</button>
                <button id="generateAIPromptBtn" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 transition">游뱄 Generera AI-prompt</button>
            </div>
        </div>

        <!-- Resultatsektion (dold fr친n b칬rjan) -->
        <div id="resultsSection" class="hidden">
            <!-- Sannolikhetstabeller -->
            <div class="grid grid-cols-1 md:grid-cols-1 gap-6 mb-8">
                <!-- Sammanfattning -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">Sammanfattning</h2>
                    <div class="space-y-3">
                        <div>
                            <p class="font-medium">Mest sannolika resultat:</p>
                            <p id="mostLikelyResult" class="text-lg font-bold text-blue-700"></p>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div>
                                <p class="font-medium">BTTS (B친da g칬r m친l):</p>
                                <div class="grid grid-cols-2 gap-2">
                                    <div class="bg-gray-100 p-2 rounded">
                                        <p>Ja: <span id="bttsYes" class="font-bold"></span></p>
                                    </div>
                                    <div class="bg-gray-100 p-2 rounded">
                                        <p>Nej: <span id="bttsNo" class="font-bold"></span></p>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <p class="font-medium">칐ver/Under 2.5 m친l:</p>
                                <div class="grid grid-cols-2 gap-2">
                                    <div class="bg-gray-100 p-2 rounded">
                                        <p>칐ver: <span id="over25" class="font-bold"></span></p>
                                    </div>
                                    <div class="bg-gray-100 p-2 rounded">
                                        <p>Under: <span id="under25" class="font-bold"></span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <p class="font-medium">1X2 Sannolikheter & Odds:</p>
                            <div class="grid grid-cols-3 gap-2">
                                <div class="bg-gray-100 p-2 rounded">
                                    <p>1: <span id="home1x2" class="font-bold"></span></p>
                                    <p>Odds: <span id="homeOdds" class="font-bold"></span></p>
                                </div>
                                <div class="bg-gray-100 p-2 rounded">
                                    <p>X: <span id="draw1x2" class="font-bold"></span></p>
                                    <p>Odds: <span id="drawOdds" class="font-bold"></span></p>
                                </div>
                                <div class="bg-gray-100 p-2 rounded">
                                    <p>2: <span id="away1x2" class="font-bold"></span></p>
                                    <p>Odds: <span id="awayOdds" class="font-bold"></span></p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <p class="font-medium">V칛rdebed칬mning:</p>
                            <div id="kellyResult" class="bg-blue-50 p-3 rounded-md font-bold"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sannolikhetsf칬rdelning -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Sannolikhetsf칬rdelning</h2>
                <div class="mb-4">
                    <canvas id="totalGoalsChart" width="400" height="200"></canvas>
                </div>
                <div id="probabilityTable" class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Totala m친l</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sannolikhet (%)</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>

            <!-- Ny sektion f칬r mest sannolika resultat -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">Mest sannolika resultat (Top 6)</h2>
                <div id="topResultsTable" class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Resultat (Hem-Borta)</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Sannolikhet (%)</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Sparade ber칛kningar (dold fr친n b칬rjan) -->
        <div id="savedCalculationsSection" class="hidden bg-white p-6 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-semibold mb-4 text-gray-800">Sparade ber칛kningar</h2>
            <div id="savedCalculationsList" class="space-y-4"></div>
            <div class="mt-4 flex flex-wrap gap-2">
                <button id="closeSavedBtn" class="bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500 transition">St칛ng</button>
                <button id="exportBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition">Exportera</button>
                <button id="importBtn" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 transition">Importera</button>
            </div>
        </div>
    </div>

    <!-- Custom Popup Component -->
    <div id="customPopup" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden">
            <div class="bg-blue-600 px-4 py-2 flex justify-between items-center">
                <h3 id="popupTitle" class="text-white font-medium">Meddelande</h3>
                <button id="popupCloseX" class="text-white hover:text-gray-200 focus:outline-none">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-4">
                <p id="popupMessage" class="text-gray-700"></p>
            </div>
            <div class="px-4 py-3 bg-gray-50 flex justify-end space-x-2">
                <button id="popupCancelBtn" class="hidden px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400">Avbryt</button>
                <button id="popupOkBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">OK</button>
            </div>
        </div>
    </div>

    <script src="calculations.js"></script>
    <script src="storage.js"></script>
    <script src="ui.js"></script>
    <script src="ai.js"></script>
    <script src="main.js"></script>
</body>
</html>